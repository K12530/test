# 智能防酒驾装置

## 一、总体设计方案

智能防酒驾装置由一个主机设备从和三个从机（酒精传感器）组成，主机采用STM32F407作为主控设备，从机采用STM32F030作为主控芯片，主机和从机之间通过NRF24L01进行无线通信。主机负责酒驾情况的判定、通过GPS进行定位、通过GMS向用户发送短信、控制车辆状态、显示设备当前状态并向驾驶员发出语音提示等工作。从机主要负责采集车辆内各处的酒精浓度、向主机报告车辆各处的酒精浓度。酒精传感器采用TGS2620高灵敏度乙醇气体传感器对气体信号进行检测，当空气中有乙醇气体存在时，该气体的浓度越高传感器的电导率也会越高。将电导率的变化转换成与该气体浓度相对应的电压信号输出，根据电压信号进行酒精含量的判断。

该装置的工作流程为：驾驶司机进入车内后，会有一个装有气体传感器的装置强行检测司机的喝酒情况。当酒精浓度较低时，系统无反应并进行语音提示，车子可以正常行驶；但是当酒精浓度过高，超过安全驾驶的酒精浓度范围时，检测装置断开点火开关，使汽车无法发动，并发出语音提示驾驶员请勿酒驾。另外，系统会通过GPS对车辆进行定位，将司机醉酒驾驶的情况和当前位置以短信的形式发送给司机的家属、朋友，或向第三方发送位置，请求代驾。

## 二、硬件电路

#### 1.主机

主机由STM32F407VET6作为主控芯片，将GPS模块、GMS模块、语音模块、NRF24L01无线通信模块、OLED显示模块集成在一起，对外提供继电器、热释电红外模块、酒精传感器和矩阵键盘的接口。主设备采用12V电源进行供电，首先经过MP1584en稳压模块将电压降至5V，为GMS模块、语音模块、继电器进行供电（原定采用AMS1117-5.0进行5V稳压，但由于AMS1117的最大输出电流只有1A，无法满足设备的供电需求）。然后在经过AMS1117-3.3将电压稳压到3.3V，为GPS模块、OLED显示屏、NRF24L01无线通信模块、热释电红外模块进行供电。

<img src="智能防酒驾装置.assets/Snipaste_2020-09-04_21-11-14.png" alt="Snipaste_2020-09-04_21-11-14" style="zoom: 35%;" />				<img src="智能防酒驾装置.assets/Snipaste_2020-09-04_21-12-11.png" alt="Snipaste_2020-09-04_21-12-11" style="zoom: 35%;" >

#### 2.从机



#### 3.酒精传感器

## 三、程序设计







## 四、改进方向